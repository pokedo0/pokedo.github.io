<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>ss-panel-v3-mod再次魔改版搭建教程 - Pokedo&#039;s blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Pokedo&#039;s blog"><meta name="msapplication-TileImage" content="/img/inmon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Pokedo&#039;s blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta description=""><meta property="og:type" content="blog"><meta property="og:title" content="ss-panel-v3-mod再次魔改版搭建教程"><meta property="og:url" content="https://pokedo.tk/Tech/ss-panel-v3-mod%E5%86%8D%E6%AC%A1%E9%AD%94%E6%94%B9%E7%89%88%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B/"><meta property="og:site_name" content="Pokedo&#039;s blog"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://i.imgur.com/d7KhpOR.png"><meta property="og:image" content="https://i.imgur.com/0OVRXDw.png"><meta property="og:image" content="https://i.imgur.com/JWx364k.png"><meta property="og:image" content="https://i.imgur.com/peJOR7D.png"><meta property="og:image" content="https://i.imgur.com/iGj0ikG.png"><meta property="og:image" content="https://i.imgur.com/pcUJ10i.png"><meta property="og:image" content="https://i.imgur.com/Jbh9q3I.jpg"><meta property="og:image" content="https://i.imgur.com/ialIm5P.png"><meta property="og:image" content="https://i.imgur.com/fOK1Y6N.png"><meta property="og:image" content="https://i.imgur.com/Bzh9jlB.png"><meta property="og:image" content="https://i.imgur.com/K2YwMlr.png"><meta property="og:image" content="https://i.imgur.com/RvAIrOA.jpg"><meta property="og:image" content="https://i.imgur.com/C6PH3oQ.png"><meta property="og:image" content="https://i.imgur.com/ma3JqiW.png"><meta property="og:image" content="https://i.imgur.com/gPpo5RK.jpg"><meta property="og:image" content="https://i.imgur.com/hcFx4cg.jpg"><meta property="og:image" content="https://i.imgur.com/RpgUNrk.png"><meta property="og:image" content="https://i.imgur.com/tBwHHiP.png"><meta property="og:image" content="https://i.imgur.com/R33BEb3.png"><meta property="og:image" content="https://i.imgur.com/Vwz9jYF.png"><meta property="og:image" content="https://i.imgur.com/pmgEkDn.png"><meta property="og:image" content="https://i.imgur.com/qF21JRg.jpg"><meta property="og:image" content="https://i.imgur.com/JG10jLq.jpg"><meta property="og:image" content="https://i.imgur.com/RxIKnAA.jpg"><meta property="og:image" content="https://i.imgur.com/Q3OeD9G.jpg"><meta property="article:published_time" content="2018-03-09T17:16:29.000Z"><meta property="article:modified_time" content="2020-12-27T04:42:37.873Z"><meta property="article:author" content="pokedo"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://i.imgur.com/d7KhpOR.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://pokedo.tk/Tech/ss-panel-v3-mod%E5%86%8D%E6%AC%A1%E9%AD%94%E6%94%B9%E7%89%88%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B/"},"headline":"Pokedo's blog","image":["https://i.imgur.com/d7KhpOR.png","https://i.imgur.com/0OVRXDw.png","https://i.imgur.com/JWx364k.png","https://i.imgur.com/peJOR7D.png","https://i.imgur.com/iGj0ikG.png","https://i.imgur.com/pcUJ10i.png","https://i.imgur.com/Jbh9q3I.jpg","https://i.imgur.com/ialIm5P.png","https://i.imgur.com/fOK1Y6N.png","https://i.imgur.com/Bzh9jlB.png","https://i.imgur.com/K2YwMlr.png","https://i.imgur.com/RvAIrOA.jpg","https://i.imgur.com/C6PH3oQ.png","https://i.imgur.com/ma3JqiW.png","https://i.imgur.com/gPpo5RK.jpg","https://i.imgur.com/hcFx4cg.jpg","https://i.imgur.com/RpgUNrk.png","https://i.imgur.com/tBwHHiP.png","https://i.imgur.com/R33BEb3.png","https://i.imgur.com/Vwz9jYF.png","https://i.imgur.com/pmgEkDn.png","https://i.imgur.com/qF21JRg.jpg","https://i.imgur.com/JG10jLq.jpg","https://i.imgur.com/RxIKnAA.jpg","https://i.imgur.com/Q3OeD9G.jpg"],"datePublished":"2018-03-09T17:16:29.000Z","dateModified":"2020-12-27T04:42:37.873Z","author":{"@type":"Person","name":"pokedo"},"description":""}</script><link rel="canonical" href="https://pokedo.tk/Tech/ss-panel-v3-mod%E5%86%8D%E6%AC%A1%E9%AD%94%E6%94%B9%E7%89%88%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B/"><link rel="icon" href="/img/inmon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.3.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/home.svg" alt="Pokedo&#039;s blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/pokedo0/"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal"><i class="fas fa-angle-double-right"></i>ss-panel-v3-mod再次魔改版搭建教程</h1><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><i class="far fa-calendar-alt"> </i><time dateTime="${date_xml(page.date)}" title="${date_xml(page.date)}">2018-03-10</time></span><span class="level-item is-hidden-mobile"><i class="far fa-calendar-check"> </i><time dateTime="${date_xml(page.updated)}" title="${date_xml(page.updated)}">2020-12-27</time></span><span class="level-item"><i class="far fa-folder-open has-text-grey"></i> <a class="link-muted" href="/categories/Tech/">Tech</a></span><span class="level-item"><i class="far fa-clock"></i> 23 minutes read (About 3482 words)</span></div></div><div class="content"><h4 id="前话"><a href="#前话" class="headerlink" title="前话"></a>前话</h4><p>买了各种鸡鸡后当然是搭个机场练练手 <del>发家致富</del> 啦</p>
<p>项目地址:<a target="_blank" rel="noopener" href="https://github.com/NimaQu/ss-panel-v3-mod_UIChanges">基于ss-panel-v3-mod的 UI 修改版</a> 主要作者分别为<code>galaxychuck (钱爸爸)</code> 和 <code>NimaQu</code></p>
<p>TG群地址: <a target="_blank" rel="noopener" href="https://t.me/sspanelv3mod_UIChanges">https://t.me/sspanelv3mod_UIChanges</a></p>
<!-- more -->
<p>关于面板介绍，引用荒岛教程的一段话：</p>
<blockquote>
<p>很久之前我写过一篇用LNMP一键包安装ss-panel-v3-mod的教程，不过说实话后来因为我发现宝塔确实比LNMP一键包方便太多，所以一直都想重新写一篇用宝塔安装ss-panel-v3-mod的教程，但是又觉得需要改动的地方不多，重复造轮子没什么意思，再加上已经有一个二次开发的版本我用宝塔写过教程了，所以就懒得折腾。<br>这不前两天在github上面找玩具来着，发现这么一个“再次修改版”。搭建完成后觉得这个版本改的挺不错的，所以干脆把这个版本用宝塔搭建的过程写一下。<br>这个ss-panel-v3-mod再次修改版主要改动如下：<br>1、支持支付宝当面付，用户可以直接在面板内自助充值和购买。<br>2、用户界面重写，UI看上去很萌，比原版的界面说实话真的要好看太多。<br>3、增加了一个首页HTML5模版，这个模版很漂亮很精致，并且登录用户可以在模版上显示自己的SS使用情况。<br>话不多说，赶紧开干！</p>
</blockquote>
<p>本教程大部分都参考自荒岛<code>LALA</code>大大的教程+自己的踩坑心得，完整搭建过程+优化大概花了一周的时间，目前还没接入支付接口。</p>
<h4 id="安装bt面板"><a href="#安装bt面板" class="headerlink" title="安装bt面板"></a>安装bt面板</h4><p>本环境选择 <code>debian8</code> 系统</p>
<p>用xshell登录vps后，安装宝塔面版:</p>
<pre><code>wget -O install.sh http://download.bt.cn/install/install-ubuntu.sh &amp;&amp; bash install.sh</code></pre>
<h4 id="面板设置-amp-前端搭建过程"><a href="#面板设置-amp-前端搭建过程" class="headerlink" title="面板设置&amp;前端搭建过程"></a>面板设置&amp;前端搭建过程</h4><p>安装LNMP环境php选择最新版本的，目前为7.2，其他默认。</p>
<p><img src="https://i.imgur.com/d7KhpOR.png" alt="Imgur"></p>
<p>左侧网站添加一个站点，绑定你的域名</p>
<p><img src="https://i.imgur.com/0OVRXDw.png" alt="Imgur"></p>
<p>xshell中 </p>
<pre><code>cd /www/wwwroot/你的站点域名 </code></pre>
<p>下载面板程序文件</p>
<pre><code>git clone https://github.com/NimaQu/ss-panel-v3-mod_UIChanges.git tmp &amp;&amp; mv tmp/.git . &amp;&amp; rm -rf tmp &amp;&amp; git reset --hard 
chown -R root:root *    #更改项目下的一些文件权限
chmod -R 777 *
chown -R www:www storage</code></pre>
<p>回到宝塔面板中，点击站点设置，添加伪静态规则：</p>
<pre><code>location / &#123;
                        try_files $uri $uri/ /index.php$is_args$args;
                &#125;</code></pre>
<p><img src="https://i.imgur.com/JWx364k.png" alt="Imgur"></p>
<p>接着点击网站目录，将运行目录改为<code>/public</code>，如图：</p>
<p><img src="https://i.imgur.com/peJOR7D.png" alt="Imgur"></p>
<p>点击宝塔的软件管理，打开PHP7.2的设置页面，删除如下图的几个函数：  </p>
<p><img src="https://i.imgur.com/iGj0ikG.png" alt="Imgur"></p>
<p>点击宝塔左侧的数据库，先查看<code>root密码</code>，再打开<code>phpmyadmin</code>登入数据库，创建名为<code>sspanel</code>的数据库</p>
<p><img src="https://i.imgur.com/pcUJ10i.png" alt="Imgur"></p>
<p>点击sql栏，点击此<a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/NimaQu/ss-panel-v3-mod_UIChanges/master/sql/glzjin_all.sql">链接</a>，复制所有sql语句到数据库执行栏，再点击执行</p>
<p><img src="https://i.imgur.com/Jbh9q3I.jpg" alt="Imgur"></p>
<p>xshell中，从站点根目录进入到<code>config</code>目录下</p>
<pre><code>cd config
cp .config.php.example .config.php #复制一份php配置</code></pre>
<p>回到宝塔面板，点击左侧文件，到<code>/www/wwwroot/域名/config</code>下编辑<code>.config.php</code>，填写站点信息。</p>
<p><img src="https://i.imgur.com/ialIm5P.png" alt="Imgur"></p>
<p>填写数据库信息</p>
<p><img src="https://i.imgur.com/fOK1Y6N.png" alt="Imgur"></p>
<p>回到xshell中，返回网站根目录下</p>
<pre><code>cd ..
php composer.phar install #安装composer</code></pre>
<p><code>composer</code>是php的依赖管理的利器，会自动安装<code>composer.json</code>文件里面指明的依赖，更多相关介绍请看<a target="_blank" rel="noopener" href="https://www.phpcomposer.com/composer-the-new-age-of-dependency-manager-for-php/">这里</a></p>
<p>安装成功后如图：<br><img src="https://i.imgur.com/Bzh9jlB.png" alt="Imgur"></p>
<p>如果安装composer过程中出现报错，请尝试下面语句：</p>
<pre><code>php composer.phar self-update  #先更新composer

php composer.phar global update fxp/composer-asset-plugin --no-plugins

composer global require fxp/composer-asset-plugin --no-plugins #更新组件fxp/composer-asset-plugin</code></pre>
<p>如果还是无法安装，请尝试全局卸载后再重新升级安装，先用<code>where composer</code> 或 <code>type composer</code> 命令找到路径，再<code>rm</code>目录即可。例如:</p>
<pre><code>root@debian:/www/wwwroot# type composer #或 where composer
composer is /usr/bin/composer
root@debian:/www/wwwroot# rm -rf /usr/bin/composer  #删除该composer目录</code></pre>
<p>再分别执行以下语句</p>
<pre><code>php xcat createAdmin          #创建管理员
php xcat syncusers            #同步用户
php xcat initQQWry            #下载IP解析库
php xcat resetTraffic         #重置流量</code></pre>
<p><img src="https://i.imgur.com/K2YwMlr.png" alt="Imgur"></p>
<p>添加计划任务：</p>
<pre><code>crontab -e</code></pre>
<p>vi 模式下输入以下内容：</p>
<pre><code>30 22 * * * php /www/wwwroot/你的站点域名/xcat sendDiaryMail
*/1 * * * * php /www/wwwroot/你的站点域名/xcat synclogin
*/1 * * * * php /www/wwwroot/你的站点域名/xcat syncvpn
0 0 * * * php -n /www/wwwroot/你的站点域名/xcat dailyjob
*/1 * * * * php /www/wwwroot/你的站点域名/xcat checkjob    
*/1 * * * * php -n /www/wwwroot/你的站点域名/xcat syncnas</code></pre>
<p>退出并保存。</p>
<p>至此，该面板程序就部署完成了，记得在你的域名管理处设置好dns解析，再打开浏览器看看效果：</p>
<p><img src="https://i.imgur.com/RvAIrOA.jpg" alt="Imgur"></p>
<p>我们用管理员账号进后台配置节点信息，同时要记住每个添加节点的<code>Id</code>，后端对接的时候要用到。</p>
<p><img src="https://i.imgur.com/C6PH3oQ.png" alt="Imgur"></p>
<h4 id="后端搭建过程"><a href="#后端搭建过程" class="headerlink" title="后端搭建过程"></a>后端搭建过程</h4><p>回到xshell中，先安装<code>libsodium</code>，chacha20相关算法需要</p>
<pre><code>cd /root
apt-get update
apt-get install build-essential #作用是提供编译程序必须软件包的列表信息
yum -y groupinstall &quot;Development Tools&quot;    #centos用这句
wget https://github.com/jedisct1/libsodium/releases/download/1.0.16/libsodium-1.0.16.tar.gz
tar xf libsodium-1.0.16.tar.gz &amp;&amp; cd libsodium-1.0.16
./configure &amp;&amp; make -j2 &amp;&amp; make install
echo /usr/local/lib &gt; /etc/ld.so.conf.d/usr_local_lib.conf
ldconfig</code></pre>
<p>安装<code>shadowsocks-manyuser</code>：</p>
<pre><code>cd /root
apt-get install python-setuptools
easy_install pip
git clone -b manyuser https://github.com/glzjin/shadowsocks.git
cd shadowsocks
pip install -r requirements.txt     #依赖包list
cp apiconfig.py userapiconfig.py
cp config.json user-config.json</code></pre>
<p>编辑配置文件：</p>
<pre><code>vi userapiconfig.py</code></pre>
<p>注意红框信息都要填写，其中<code>note_id</code>和前端管理面板对应节点的<code>id</code>一致，<code>mysql_host</code>如果是本地就默认填 <code>127.0.0.1</code></p>
<p><img src="https://i.imgur.com/ma3JqiW.png" alt="Imgur"></p>
<p>填写完成后，用调试模式先启动后端：</p>
<pre><code>python server.py</code></pre>
<p>如图能返回如下信息则正常，自己也可以尝试在前端面板扫码连接试试。<br><img src="https://i.imgur.com/gPpo5RK.jpg" alt="Imgur"></p>
<p>确定没问题后，Ctrl+C退出来，输入如下命令可将程序放到后台运行：</p>
<pre><code>./run.sh</code></pre>
<p>此时我们返回前端，可以看到面板是在线状态</p>
<p><img src="https://i.imgur.com/hcFx4cg.jpg" alt="Imgur"></p>
<p>这时候我们还要配置<code>supervisor</code>，在机器重启或进程被杀后，保证后端进程还能自启。</p>
<h3 id="配置supervisor守护进程"><a href="#配置supervisor守护进程" class="headerlink" title="配置supervisor守护进程"></a>配置supervisor守护进程</h3><p>关于<code>supervisor</code>的一些介绍：</p>
<blockquote>
<p>Supervisor的服务器端称为supervisord，主要负责在启动自身时启动管理的子进程，响应客户端的命令，重启崩溃或退出的子进程，记录子 进程stdout和stderr输出，生成和处理子进程生命周期中的事件。可以在一个配置文件中配置相关参数，包括Supervisord自身的状态，其管理的各个子进程的相关属性。配置文件一般位于/etc/supervisord.conf。</p>
</blockquote>
<blockquote>
<p>Supervisor的客户端称为supervisorctl，它提供了一个类shell的接口（即命令行）来使用supervisord服务端提供的功 能。通过supervisorctl，用户可以连接到supervisord服务器进程，获得服务器进程控制的子进程的状态，启动和停止子进程，获得正在 运行的进程列表。客户端通过Unix域套接字或者TCP套接字与服务端进行通信，服务器端具有身份凭证认证机制，可以有效提升安全性。当客户端和服务器位 于同一台机器上时，客户端与服务器共用同一个配置文件/etc/supervisord.conf，通过不同标签来区分两者的配置。</p>
</blockquote>
<p>我们先 <code>reboot</code>，确保后端进程没运行。</p>
<p>执行下面语句</p>
<pre><code>cd/root

pip install supervisor  #安装supervisor

echo_supervisord_conf &gt; /etc/supervisord.conf #生成supervisor配置文件;

vi  /etc/supervisord.conf   #编辑配置文件</code></pre>
<p>vi模式下在任意一行加入如下语句:</p>
<pre><code>[program:ss-manyuser]
command =  python /root/shadowsocks/server.py
user = root
autostart = true
autorestart = true</code></pre>
<p>启动服务端</p>
<pre><code>supervisord     #必须先运行服务端，后运行客户端</code></pre>
<p>启动客户端</p>
<pre><code>supervisorctl start all</code></pre>
<p>把 <code>supervisor</code> 加入开机启动进程，往<code>rc.local</code>加入对应启动命令即可</p>
<pre><code>vi /etc/rc.local

vi /etc/rc.d/rc.local   #有时候rc.local会在rc.d目录下，则用这句</code></pre>
<p><code>rc.local</code>中加入这句</p>
<pre><code>supervisord</code></pre>
<p><code>reboot</code>后再次输入<code>supervisord</code>，如果显示<code>Another program is running</code>，即说明成功自启。</p>
<hr>
<h5 id="更新supervisor配置-可选"><a href="#更新supervisor配置-可选" class="headerlink" title="更新supervisor配置(可选)"></a>更新supervisor配置(可选)</h5><p>客户端相关指令</p>
<pre><code>supervisorctl start all #启动所有配置进程
supervisorctl reload    #重载
supervisorctl status    #状态
supervisorctl update    #更新配置文件，需要supervisord重启</code></pre>
<blockquote>
<p>如果出现客户端运行报错，参考<a target="_blank" rel="noopener" href="http://www.xgllseo.com/?p=5418">这里</a></p>
</blockquote>
<p>重启 supervisor 服务以加载配置</p>
<pre><code>killall -HUP supervisord </code></pre>
<p>至此，本地的单个前后端fq服务已经基本可以使用了，要对接多个后端节点的话，请看下一步。</p>
<h4 id="其他后端节点对接"><a href="#其他后端节点对接" class="headerlink" title="其他后端节点对接"></a>其他后端节点对接</h4><blockquote>
<p>因为是在其他节点服务器共同操作一个远程的数据库，所以我们必须要修改数据库赋予远程登录主机相关权限，方便获取数据库中用户自定义的协议方式等等数据。</p>
</blockquote>
<p>打开前端服务器上的phpmyadmin，点击用户，找到用户名为root，主机头为127.0.0.1的这一条，点击修改权限：</p>
<p><img src="https://i.imgur.com/RpgUNrk.png" alt="Imgur"></p>
<p>点击登录信息：</p>
<p><img src="https://i.imgur.com/tBwHHiP.png" alt="Imgur"></p>
<p>将Host这一处改为任意主机，后面就会自动变成%号，其他什么都不管，点击执行：</p>
<p><img src="https://i.imgur.com/R33BEb3.png" alt="Imgur"></p>
<p>现在回到之前的页面可以看到多出了一个用户名为root主机头为%的用户，点击修改权限：</p>
<p><img src="https://i.imgur.com/Vwz9jYF.png" alt="Imgur"></p>
<p>将全局权限这里打勾，点击执行即可：</p>
<p><img src="https://i.imgur.com/pmgEkDn.png" alt="Imgur"></p>
<p>剩下的就是按照前面安装后端面板的教程，注意填好配置文件的信息，比如<code>node_id</code>，<code>mysql_hos</code>t等。</p>
<hr>
<p>来放几张成品图吧~~<br><img src="https://i.imgur.com/qF21JRg.jpg" alt="Imgur"><br><img src="https://i.imgur.com/JG10jLq.jpg" alt="Imgur"></p>
<h4 id="其他问题"><a href="#其他问题" class="headerlink" title="其他问题"></a>其他问题</h4><p>1.如何自定义前端页面，图片？</p>
<blockquote>
<p>建议先在<a target="_blank" rel="noopener" href="https://github.com/NimaQu/ss-panel-v3-mod_UIChanges">项目</a>上直接搜索相关关键词，找到要修改文件的位置，再在本地修改完后，宝塔上传到vps即可。比如限制用户可选择的自定义协议列表。<br>如果前端改动页面较多并且要长期使用，可以fork下来自己修改。</p>
</blockquote>
<p><img src="https://i.imgur.com/RxIKnAA.jpg" alt="Imgur"></p>
<p>2.如何自定义ss panel的各种功能？</p>
<blockquote>
<p>请编辑根目录下<code>confing/.config.php</code>文件</p>
</blockquote>
<p>3.要不要设置防火墙端口？</p>
<blockquote>
<p>如果有出现后端无法跑ss的情况，可以关闭防火墙试试。<code>systemctl stop firewalld.service</code><br>在宝塔面板要记得放行对应的端口，比如25，465的邮件端口等等。<br><img src="https://i.imgur.com/Q3OeD9G.jpg" alt="Imgur"></p>
</blockquote>
<p>4.更换自定义协议后，出现无法连接的情况？</p>
<blockquote>
<p>这个问题其实我觉得有点玄学，在后端跑python调试的时候，会显示是protocol错误的原因，按常规方法的话，就是耐心等待几分钟，等后端更改为新协议后便可连接上去。但有时候我自己win端就是跑不了，手机端反而能正常连上，后来我又改回上次能连接的协议就正常了。。<br>当然这都是建立在各种参数填写正确的情况下，比如混淆参数。</p>
</blockquote>
<p>5.宝塔面板的Nigix服务无法启动显示报错？phpmyadmin无法打开，显示502？</p>
<blockquote>
<p>这种情况都是Nigix的问题，针对第一种情况，一般都是针对被抢占的端口进程直接kill掉即可，自行google。第二种问题，切换Nigix到1.8版本解决。重装我没试过。</p>
</blockquote>
<h4 id="参考来源"><a href="#参考来源" class="headerlink" title="参考来源"></a>参考来源</h4><p>荒岛:<br>ss-panel-v3-mod再次修改版安装教程: <a target="_blank" rel="noopener" href="https://lala.im/2398.html">https://lala.im/2398.html</a><br>ss-panel-v3-mod二次开发版详细搭建教程: <a target="_blank" rel="noopener" href="https://lala.im/1059.html">https://lala.im/1059.html</a><br>详细安装ss-panel-v3魔改版前端+后端教程: <a target="_blank" rel="noopener" href="https://lala.im/88.html">https://lala.im/88.html</a>: <a target="_blank" rel="noopener" href="https://lala.im/88.html">https://lala.im/88.html</a><br>通用教程：ss面板后端远程节点配置: <a target="_blank" rel="noopener" href="https://lala.im/963.html">https://lala.im/963.html</a>  </p>
<p>Github官方WIKI: <a target="_blank" rel="noopener" href="https://github.com/NimaQu/ss-panel-v3-mod_UIChanges/wiki">https://github.com/NimaQu/ss-panel-v3-mod_UIChanges/wiki</a></p>
<p>其他教程:<br>基于 CentOS 配置 Shadowsocks 笔记: <a target="_blank" rel="noopener" href="http://blog.huangyafei.com/post/2016-03-21#toc_26">http://blog.huangyafei.com/post/2016-03-21#toc_26</a></p>
<p>Supervisor相关:<br>Supervisor进程管理&amp;开机自启: <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/03619bf7d7f5">https://www.jianshu.com/p/03619bf7d7f5</a><br>解决unix:///var/run/supervisor.sock no such file的方法: <a target="_blank" rel="noopener" href="http://www.xgllseo.com/?p=5418">http://www.xgllseo.com/?p=5418</a></p>
<h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><p>ss各客户端的官方下载地址:<br><a target="_blank" rel="noopener" href="https://github.com/shadowsocks/shadowsocks-windows/releases">https://github.com/shadowsocks/shadowsocks-windows/releases</a><br><a target="_blank" rel="noopener" href="https://github.com/shadowsocks/simple-obfs/releases">https://github.com/shadowsocks/simple-obfs/releases</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/shadowsocks/shadowsocks-android/releases">https://github.com/shadowsocks/shadowsocks-android/releases</a><br><a target="_blank" rel="noopener" href="https://github.com/shadowsocks/simple-obfs-android/releases">https://github.com/shadowsocks/simple-obfs-android/releases</a></p>
<p><a target="_blank" rel="noopener" href="https://www.sockscap64.com/changelog-of-sstap/">https://www.sockscap64.com/changelog-of-sstap/</a></p>
<p>目前推荐的协议解释:<br><a target="_blank" rel="noopener" href="https://github.com/shadowsocks/shadowsocks-windows/issues/1243">https://github.com/shadowsocks/shadowsocks-windows/issues/1243</a><br><a target="_blank" rel="noopener" href="https://shadowsocks.org/en/spec/Stream-Ciphers.html">https://shadowsocks.org/en/spec/Stream-Ciphers.html</a><br><a target="_blank" rel="noopener" href="https://shadowsocks.org/en/spec/AEAD-Ciphers">https://shadowsocks.org/en/spec/AEAD-Ciphers</a><br><a target="_blank" rel="noopener" href="https://blessing.studio/why-do-shadowsocks-deprecate-ota/">https://blessing.studio/why-do-shadowsocks-deprecate-ota/</a>  </p>
</div><div class="article-licensing box"><div class="licensing-title"><p>ss-panel-v3-mod再次魔改版搭建教程</p><p><a href="https://pokedo.tk/Tech/ss-panel-v3-mod再次魔改版搭建教程/">https://pokedo.tk/Tech/ss-panel-v3-mod再次魔改版搭建教程/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>pokedo</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2018-03-10</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2020-12-27</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i> </a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i> </a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i> </a></p></div></div></div></div></div><hr style="height:1px;margin:1rem 0"><div class="level is-mobile is-flex"></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/Tech/SS-client%E7%AB%AF%E6%90%AD%E5%BB%BA/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">SS-client端搭建</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/Anime/%E7%94%BB%E5%B8%88%E9%89%B4%E8%B5%8F/"><span class="level-item">画师鉴赏</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level" style="margin-bottom:1rem"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/nagisa03.png" alt="Pokedo&#039;s blog"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Pokedo&#039;s blog</p><p class="is-size-6 is-block">-----</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>China</span></p></div></div></nav><nav class="level menu-list is-mobile" style="margin-bottom:1rem"><a class="level-item has-text-centered is-marginless" href="/archives/"><div><p class="heading">Posts</p><div><p class="title">12</p></div></div></a><a class="level-item has-text-centered is-marginless" href="/categories/"><div><p class="heading">Categories</p><div><p class="title">3</p></div></div></a><a class="level-item has-text-centered is-marginless" href="/tags/"><div><p class="heading">Tag</p><div><p class="title">1</p></div></div></a></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/pokedo0/" target="_blank" rel="noopener"><i class="fab fa-github"></i>  Follow</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/pokedo0/"><i class="fab fa-github"></i></a></div></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><ul class="menu-list"><li><a class="level is-mobile" href="#前话"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">前话</span></span></a></li><li><a class="level is-mobile" href="#安装bt面板"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">安装bt面板</span></span></a></li><li><a class="level is-mobile" href="#面板设置-amp-前端搭建过程"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">面板设置&amp;前端搭建过程</span></span></a></li><li><a class="level is-mobile" href="#后端搭建过程"><span class="level-left"><span class="level-item">1.4</span><span class="level-item">后端搭建过程</span></span></a></li></ul><li><a class="level is-mobile" href="#配置supervisor守护进程"><span class="level-left"><span class="level-item">2</span><span class="level-item">配置supervisor守护进程</span></span></a><ul class="menu-list"><ul class="menu-list"><li><a class="level is-mobile" href="#更新supervisor配置-可选"><span class="level-left"><span class="level-item">2.1.1</span><span class="level-item">更新supervisor配置(可选)</span></span></a></li></ul><li><a class="level is-mobile" href="#其他后端节点对接"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">其他后端节点对接</span></span></a></li><li><a class="level is-mobile" href="#其他问题"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">其他问题</span></span></a></li><li><a class="level is-mobile" href="#参考来源"><span class="level-left"><span class="level-item">2.4</span><span class="level-item">参考来源</span></span></a></li><li><a class="level is-mobile" href="#其他"><span class="level-left"><span class="level-item">2.5</span><span class="level-item">其他</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Anime/"><span class="level-start"><span class="level-item">Anime</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Life/"><span class="level-start"><span class="level-item">Life</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Tech/"><span class="level-start"><span class="level-item">Tech</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/home.svg" alt="Pokedo&#039;s blog" height="28"></a><p class="is-size-7"><span>&copy; 2021 pokedo</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js"></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>